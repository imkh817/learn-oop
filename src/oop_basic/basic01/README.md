## 책 대출 시스템

**시나리오**

> 사용자가 책을 빌리려 한다.
책은 대충 가능 여부를 판단하고, 도서관은 대출 기록을 관리한다.

**미션 : “책 대출”이라는 기능을 아래 3가지로 분해해보기**

- 어떤 객체들이 등장해야 할까?
- 각 객체의 역할은 무엇일까?
- 책임은 어떻게 나눌까?

---
## 내가 생각한 흐름
### 필요한 객체
- `User`
- `Book`
- `Library`
- `Loan`

### 각 객체의 역할
- `User` - 사용자
- `Book` - 책
- `Library` - 도서관
- `Loan` - 대출

### 책임을 어떻게 나눌까?
- `User` - 책을 빌리는 책임
- `Book` - 대출 가능 여부를 판단하는 책임
- `Library` - 대출 기록을 관리하는 책임
- `Loan` - 대출 기록을 기록하는 책임

---
## Feedback
### 역할/책임 분해 평가
1. `User`의 책임
   - "책을 빌리는 책임" 이라고 했는데 -> 사실 "빌리고 싶다는 요청" 을 하는게 자연스럽다.
   - 실제 대출 처리 책임은 `Library`나 `Loan`에 있는게 타당하다.
   - RDD에서는 **"행위를 요청하는 주체"** 와 **"실제 수행하는 객체"** 를 분리하는 게 중요하다.

2. `Loan`의 책임
   - 단순히 "기록"만 한다면 객체로 만들 필요가 없다.
   - 하지만 대출일, 반납일, 연체 여부 판단 등의 행위가 있다면 완전한 도메인 객체가 될 수 있다.
   - 지금은 기록 저장 이상의 책임을 부여할 여지가 있음
3. `Library`
   - "대출 기록 관리" 외에도, 실제로 `Loan`을 생성하고 Book에게 대출 가능한지 확인까지 위임을 받을 수 있다.
   - 즉, 도서관은 여러 객체 간 **중재자 역할** 로 책임을 질 수 있다.

### CRC 카드로 설계 다듬기
| Class   | Responsibility          | Collaborators    |
| ------- | ----------------------- | ---------------- |
| User    | 책 대출 요청                 | Library          |
| Book    | 대출 가능 여부 판단, 제목/상태 보관   | -                |
| Library | 대출 가능 여부 확인, Loan 생성    | Book, Loan, User |
| Loan    | 대출 시작일/반납일 관리, 연체 여부 판단 | Book, User       |

### 책임 중심 협력 시나리오 작성하기
**✅ 시나리오: 사용자가 책을 빌린다.**
1. `User`가 `Library`에 책 대출을 요청한다.
2. `Library`는 해당 `Book`의 대출 가능 여부를 확인한다.
3. 가능하면 `Loan`을 생성하고, 사용자와 책을 연결한다.
4. `Library`는 `Loan`을 대출 기록에 저장한다.